<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>DJ Neon Millennium Countdown</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Audiowide&display=swap" rel="stylesheet">

<style>
body {
    margin:0;
    background:#050816;
    color:white;
    font-family:sans-serif;
    overflow:hidden;
}

/* HEADER */
#header {
    text-align:center;
    font-family:'Audiowide';
    font-size:42px;
    padding-top:20px;
    color:#00f7ff;
    text-shadow:0 0 25px #00f7ff;
}

/* MASSIVE COUNTDOWN */
#countdown {
    text-align:center;
    font-family:'Orbitron';
    font-size:160px;
    margin-top:10px;
    background: linear-gradient(to bottom, #ffffff, #bbbbbb);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow:0 0 60px #ff00ff;
}

/* Equalizer */
#equalizer {
    margin-top:10px;
    display:flex;
    justify-content:center;
    gap:6px;
}

.bar {
    width:8px;
    height:60px;
    background:#00f7ff;
    animation: bounce 1s infinite ease-in-out;
}

@keyframes bounce {
    0%,100% {height:20px;}
    50% {height:100px;}
}

/* PHOTO GRID */
#photos {
    position:absolute;
    bottom:110px;
    width:100%;
    display:grid;
    grid-template-columns: repeat(10, 1fr);
    gap:30px;
    padding:40px;
    box-sizing:border-box;
}

/* POLAROID CARD */
.polaroid {
    background:white;
    color:black;
    padding:12px;
    text-align:center;
    opacity:0;
    transform: translateY(40px);
    transition: all 0.8s ease;
}

/* Neon Glow Border */
.polaroid {
    box-shadow:
        0 0 10px #ff00ff,
        0 0 25px #ff00ff,
        0 0 50px #ff00ff;
}

/* Slide-in Activated */
.polaroid.show {
    opacity:1;
    transform: translateY(0);
}

/* Floating Animation */
.polaroid.float {
    animation: float 6s ease-in-out infinite alternate;
}

@keyframes float {
    0% { transform: translateY(0px) rotate(var(--tilt)); }
    100% { transform: translateY(-8px) rotate(var(--tilt)); }
}

/* Portrait Friendly */
.polaroid img {
    width:100%;
    height:320px;
    object-fit:contain;
    background:black;
}

.name {
    font-family:'Audiowide';
    font-size:16px;
    margin-top:6px;
}

.real {
    font-size:14px;
}

/* Spotlight */
#spotlight {
    position:absolute;
    left:40px;
    bottom:40px;
    font-size:20px;
    max-width:600px;
}

/* Ticker */
#ticker {
    position:absolute;
    bottom:0;
    width:100%;
    background:black;
    color:#00ff88;
    white-space:nowrap;
    overflow:hidden;
}

#ticker span {
    display:inline-block;
    padding-left:100%;
    animation: ticker 20s linear infinite;
}

@keyframes ticker {
    0% {transform:translateX(0);}
    100% {transform:translateX(-100%);}
}

#y2k {
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:black;
    display:none;
    justify-content:center;
    align-items:center;
    font-family:'Orbitron';
    font-size:80px;
    color:#00ffcc;
}
</style>
</head>
<body>

<div id="header">DJ NEON'S MILLENNIUM COUNTDOWN</div>
<div id="countdown"></div>
<div id="equalizer"></div>
<div id="photos"></div>
<div id="spotlight"></div>

<div id="ticker">
    <span>
        MusicNetHub â–² 32% | Sterling Soundscapes â–¼ 12% | Napster Lawsuit Pending | Y2K Bug Risk: CRITICAL | ARE WE READY?
    </span>
</div>

<div id="y2k">WELCOME TO 2000</div>

<script>
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vR2-PvhqluJKo9Fg8Oxx9t5GlTvA9zv8bUm1DVHVnlc_4R2T2Jdtip1hmUVJvHI6Ik6T69VT_Bn270R/pub?output=csv";

const targetHour = 22;
const targetMinute = 0;

/* Countdown */
function updateCountdown(){
    const now = new Date();
    const target = new Date();
    target.setHours(targetHour);
    target.setMinutes(targetMinute);
    target.setSeconds(0);

    const diff = target - now;

    if(diff <= 0){
        document.getElementById("y2k").style.display="flex";
        return;
    }

    const hrs = Math.floor(diff/1000/60/60);
    const mins = Math.floor(diff/1000/60)%60;
    const secs = Math.floor(diff/1000)%60;

    document.getElementById("countdown").innerText =
        String(hrs).padStart(2,"0")+":"+
        String(mins).padStart(2,"0")+":"+
        String(secs).padStart(2,"0");
}
setInterval(updateCountdown,1000);
updateCountdown();

/* Equalizer */
for(let i=0;i<40;i++){
    const bar = document.createElement("div");
    bar.className="bar";
    bar.style.animationDelay = (Math.random()*1)+"s";
    document.getElementById("equalizer").appendChild(bar);
}

/* CSV Parsing */
function parseCSV(text){
    return text.trim().split("\n").map(row =>
        row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/)
    ).map(r => r.map(c => c.replace(/^"|"$/g,'')));
}

let spotlightIndex = 0;
let spotlightGuests = [];

function rotateSpotlight(){
    if(spotlightGuests.length === 0) return;
    const g = spotlightGuests[spotlightIndex % spotlightGuests.length];
    document.getElementById("spotlight").innerHTML =
        "<b>ðŸ”¦ CLUB SPOTLIGHT</b><br>"+
        g.name+" â€“ "+g.title+"<br>"+
        "\""+g.desc+"\"";
    spotlightIndex++;
}
setInterval(rotateSpotlight,8000);

async function loadSheet(){
    const response = await fetch(sheetURL);
    const text = await response.text();
    const rows = parseCSV(text);

    const container = document.getElementById("photos");

    for(let i=1;i<rows.length;i++){
        const row = rows[i];
        if(row.length < 5) continue;

        const character = row[0];
        const title = row[1];
        const desc = row[2];
        const real = row[3];
        const photoFile = row[4];

        if(real && photoFile){
            if(document.getElementById(character)) continue;

            const div = document.createElement("div");
            div.className="polaroid";
            div.id = character;

            const randomTilt = (Math.random()*6 - 3) + "deg";
            div.style.setProperty('--tilt', randomTilt);
            div.style.transform = "rotate(" + randomTilt + ")";

            const img = new Image();
            img.src = "photos/" + photoFile;

            img.onload = function(){
                div.appendChild(img);

                const name = document.createElement("div");
                name.className="name";
                name.innerText = character;
                div.appendChild(name);

                const realDiv = document.createElement("div");
                realDiv.className="real";
                realDiv.innerText = real;
                div.appendChild(realDiv);

                container.appendChild(div);

                setTimeout(()=>{
                    div.classList.add("show");
                    div.classList.add("float");
                },50);

                spotlightGuests.push({
                    name: character,
                    title: title,
                    desc: desc
                });
            };
        }
    }
}

setInterval(loadSheet,15000);
loadSheet();
</script>

</body>
</html>
